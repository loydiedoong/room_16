<!-- Chosen Palette: Calm Harmony (Neutral background, white panels, blue/green/red accents) -->
<!-- Application Structure Plan: A dashboard-style SPA with a left-hand navigation. This structure is designed for different user roles (Leadership vs. Teachers). Leadership can use the 'School-Wide Dashboard' (default) for a high-level overview. Grade-Level leads can use 'Grade-Level Deep Dives' to compare classes. Teachers can use the 'Student Action Lists' page to filter for their specific students who need intervention or celebration. This is more usable than a linear report as it allows users to immediately access the information relevant to their role and task. -->
<!-- Visualization & Content Choices:
- School-Wide KPIs: Inform -> Dynamic Stat Cards (HTML/Tailwind) -> Shows high-level metrics from Exec Summary.
- School-Wide Proficiency (Fall vs Winter): Show Change -> Bar Chart (Chart.js) -> Clearly visualizes the 8.2 p.p. gain.
- School-Wide Growth Breakdown: Show Proportions -> Donut Chart (Chart.js) -> Shows ratio of Met Annual (16.3%), Regressed (25.2%), and Grew/Below (58.5%).
- Domain Performance (School & Grade): Compare -> Horizontal Bar Chart (Chart.js) -> Best for comparing the 4 domains and identifying strengths/weaknesses. Dynamically updates on the Grade-Level page.
- Teacher Comparisons: Compare -> Grouped Bar Chart (Chart.js) -> Directly compares teachers on % Met Growth and % Regressed.
- Student Lists: Organize/Inform -> Interactive HTML Table -> On-click tabs (Celebration/Intervention) and dropdown filters (Grade, Teacher) allow teachers to create actionable lists for their own class.
- Recommendations: Inform -> Styled HTML list -> Presents the report's recommendations clearly.
-->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winter Math Diagnostic Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        .nav-item {
            cursor: pointer;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .nav-item:hover {
            background-color: #eef2ff;
            color: #4338ca;
        }
        .nav-item.active {
            background-color: #4f46e5;
            color: white;
        }
        .tab-button {
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        .tab-button.active {
            color: #4f46e5;
            border-bottom-color: #4f46e5;
        }
        .tab-button:hover:not(.active) {
            color: #4f46e5;
            background-color: #eef2ff;
        }
    </style>
</head>
<body class="bg-neutral-50 text-neutral-800">

    <div class="flex h-screen">
        <!-- Sidebar Navigation -->
        <nav class="w-64 bg-white border-r border-neutral-200 p-4 flex-col hidden md:flex">
            <h1 class="text-xl font-bold text-indigo-700 mb-6 px-2">Winter Math Report</h1>
            <ul class="space-y-2">
                <li><a class="nav-item active" data-view="dashboard">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M2 4.25A2.25 2.25 0 0 1 4.25 2h11.5A2.25 2.25 0 0 1 18 4.25v8.5A2.25 2.25 0 0 1 15.75 15h-3.19l-3.22 3.52a.75.75 0 0 1-1.12 0L5.19 15h-3.19A2.25 2.25 0 0 1 0 12.75v-8.5Zm1.5 0a.75.75 0 0 1 .75-.75h11.5a.75.75 0 0 1 .75.75v8.5a.75.75 0 0 1-.75.75h-2.69l-2.78 3.03a.25.25 0 0 1-.4 0L6.44 13.5H3.75a.75.75 0 0 1-.75-.75v-8.5Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12.25 8a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5V8Z" clip-rule="evenodd" /></svg>
                    School-Wide
                </a></li>
                <li><a class="nav-item" data-view="grades">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M15.98 1.833a.75.75 0 0 1 .447 1.344l-3.02 1.745a.75.75 0 0 1-.673.01L10 3.12l-2.734 1.813a.75.75 0 0 1-.673-.01L3.57 3.177a.75.75 0 1 1 .894-1.344L7.5 3.693l2.23-1.487a.75.75 0 0 1 .54 0L12.5 3.693l3.033-1.745a.75.75 0 0 1 .447-.115ZM17.25 6a.75.75 0 0 1 .75.75v8.5a.75.75 0 0 1-.75.75H2.75a.75.75 0 0 1-.75-.75v-8.5a.75.75 0 0 1 .75-.75h14.5Z" clip-rule="evenodd" /></svg>
                    Grade Deep Dives
                </a></li>
                <li><a class="nav-item" data-view="students">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.98 9.98 0 0 0 10 18c2.296 0 4.47-1.03 6.125-2.095a1.23 1.23 0 0 0 .41-1.412A9.988 9.988 0 0 0 10 12c-2.296 0-4.47 1.03-6.125 2.095Z" /><path d="M16.707 12.293a1 1 0 0 1 0 1.414l-1 1a1 1 0 0 1-1.414 0l-1.5-1.5a1 1 0 1 1 1.414-1.414L15 12.586l.293-.293a1 1 0 0 1 1.414 0Z" /></svg>
                    Student Action Lists
                </a></li>
                <li><a class="nav-item" data-view="recommendations">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201-2.437c-1.282.04-2.474.47-3.48 1.182a.75.75 0 1 0 .868 1.18A6.967 6.967 0 0 0 5.5 11.25a.75.75 0 0 0 1.5 0c0-.214.022-.426.065-.632a3.998 3.998 0 0 0 8.188-1.72.75.75 0 1 0-1.44.432A2.5 2.5 0 0 1 11.5 12.25a.75.75 0 0 0 0 1.5 3.998 3.998 0 0 0 3.812-2.326ZM10 2.5a.75.75 0 0 1 .75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 1 0 1.5h-.008a.75.75 0 0 1-.75-.75V5.5h-.008a.75.75 0 0 1-.75-.75V4.75h-.008a.75.75 0 0 1-.75-.75V4a.75.75 0 0 1 .75-.75h.008C9.586 3.25 10 3.586 10 4v-.008A.75.75 0 0 1 10 2.5Z" clip-rule="evenodd" /><path d="M4.75 12.355a.75.75 0 0 0 1.06 1.06l1.244-1.243a.75.75 0 0 0-1.06-1.06l-1.244 1.243ZM15.31 6.126a.75.75 0 0 0-1.06 1.06l1.243 1.244a.75.75 0 0 0 1.06-1.06l-1.243-1.244Z" /></svg>
                    Recommendations
                </a></li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto p-6 md:p-10">
            <div id="content-area">
                <!-- Content will be dynamically injected here by JavaScript -->
            </div>
        </main>
    </div>

    <script>
        // --- DATA STORE (from user-provided text) ---
        const reportData = {
            schoolWide: {
                proficiency: { fall: 20.7, winter: 28.9 },
                growth: { metAnnual: 16.3, regressed: 25.2, other: (100 - 16.3 - 25.2).toFixed(1) },
                domains: [
                    { name: 'Number and Operations', pct: 43.4 },
                    { name: 'Algebra and Algebraic Thinking', pct: 35.1 },
                    { name: 'Measurement and Data', pct: 30.1 },
                    { name: 'Geometry', pct: 25.8 },
                ].sort((a,b) => b.pct - a.pct)
            },
            gradeData: {
                3: {
                    summary: "The 3rd-grade team shows the most promising growth profile. Mr. Griffin's class, starting with only 4.8% proficiency, made a remarkable 19.0 point jump to 23.8%. Mr. Doong's class, while showing a smaller proficiency gain (+8.7 p.p.), had an impressively low regression rate of only 4.3%. The most telling data is the domain comparison: Mr. Doong's class is outperforming in 'Algebra and Algebraic Thinking' (47.8% proficient), while both classes are nearly tied in 'Number and Operations'. This suggests Mr. Doong's instruction in Algebra is highly effective. Both classes are performing below the grade-level average in 'Geometry'.",
                    domains: [
                        { name: 'Number and Operations', pct: 47.0 },
                        { name: 'Algebra and Algebraic Thinking', pct: 40.0 },
                        { name: 'Measurement and Data', pct: 32.0 },
                        { name: 'Geometry', pct: 23.0 },
                    ].sort((a,b) => b.pct - a.pct),
                    teacherDomains: {
                        labels: ["N&O", "Algebra", "M&D", "Geo"],
                        doong: { name: "Doong (47.8% Alg)", data: [43.5, 47.8, 30, 22] },
                        griffin: { name: "Griffin (33.3% Alg)", data: [42.9, 33.3, 33, 29] }
                    },
                    teachers: [
                        { name: 'Doong', students: 23, profFall: 17.4, profWinter: 26.1, profChange: 8.7, metGrowth: 26.1, regressed: 4.3 },
                        { name: 'Griffin', students: 21, profFall: 4.8, profWinter: 23.8, profChange: 19.0, metGrowth: 23.8, regressed: 19.0 },
                    ]
                },
                4: {
                    summary: "The 4th-grade data presents a significant challenge. Both classes are struggling with high rates of stagnation or regression, at 30.4% (Sheiring) and 27.3% (Sutter). This means nearly 1 in 3 students in 4th grade lost ground. While Ms. Sutter's class saw a better proficiency gain (+9.1 p.p.), the overall picture is one of stalled momentum. Only 13.3% of students in the grade have met their annual growth target. This grade level requires the most urgent review of instructional practices and intervention models, as a large number of students are not responding to the current program.",
                    domains: [
                        { name: 'Number and Operations', pct: 48.9 },
                        { name: 'Algebra and Algebraic Thinking', pct: 35.6 },
                        { name: 'Measurement and Data', pct: 26.7 },
                        { name: 'Geometry', pct: 26.7 },
                    ].sort((a,b) => b.pct - a.pct),
                    teachers: [
                        { name: 'Sheiring', students: 23, profFall: 21.7, profWinter: 26.1, profChange: 4.4, metGrowth: 13.0, regressed: 30.4 },
                        { name: 'Sutter', students: 22, profFall: 27.3, profWinter: 36.4, profChange: 9.1, metGrowth: 13.6, regressed: 27.3 },
                    ]
                },
                5: {
                    summary: "5th grade shows the lowest overall growth and the most alarming classroom-level discrepancy. Ms. Lopez's class is in a critical state, with nearly half of the students (47.4%) showing zero or negative growth. This regression rate is an outlier for the entire school and demands immediate, targeted intervention. In contrast, Ms. Long's class has the highest proficiency in the grade (33.3%) but is still struggling to move students, with only 7.4% meeting their annual growth target. This suggests her proficient students are maintaining, but her below-level students are stuck.",
                    domains: [
                        { name: 'Number and Operations', pct: 39.1 },
                        { name: 'Algebra and Algebraic Thinking', pct: 26.1 },
                        { name: 'Measurement and Data', pct: 28.3 },
                        { name: 'Geometry', pct: 28.3 },
                    ].sort((a,b) => b.pct - a.pct),
                    teachers: [
                        { name: 'Long', students: 27, profFall: 29.6, profWinter: 33.3, profChange: 3.7, metGrowth: 7.4, regressed: 25.9 },
                        { name: 'Lopez', students: 19, profFall: 21.1, profWinter: 26.3, profChange: 5.2, metGrowth: 15.8, regressed: 47.4 },
                    ]
                }
            },
            studentLists: {
                celebration: [
                    { name: 'Lozano Camacho, Marcus', teacher: 'Doong', grade: 3, growth: 37 },
                    { name: 'Abad, Caitlyn', teacher: 'Doong', grade: 3, growth: 34 },
                    { name: 'Maldonado de Leon, Jairo', teacher: 'Doong', grade: 3, growth: 33 },
                    { name: 'Bosheh, Naya', teacher: 'Doong', grade: 3, growth: 30 },
                    { name: 'Estrada, Abraham', teacher: 'Doong', grade: 3, growth: 28 },
                    { name: 'Regado, Scarlett Heart', teacher: 'Griffin', grade: 3, growth: 44 },
                    { name: 'Catiis, Rayliegh', teacher: 'Griffin', grade: 3, growth: 39 },
                    { name: 'Lingstuyl Gonzalez, Edward', teacher: 'Griffin', grade: 3, growth: 39 },
                    { name: 'Cifuentes Barrios, Giovanni', teacher: 'Griffin', grade: 3, growth: 32 },
                    { name: 'Ferrer Castrillo, Kristal', teacher: 'Sheiring', grade: 4, growth: 45 },
                    { name: 'Chang, Reginald James', teacher: 'Sheiring', grade: 4, growth: 39 },
                    { name: 'Khanouf, Charbel', teacher: 'Sheiring', grade: 4, growth: 32 },
                    { name: 'Mendez Alvarez, Mathias Arturo', teacher: 'Sutter', grade: 4, growth: 34 },
                    { name: 'Hernandez Gomez, Chelsea', teacher: 'Lopez', grade: 5, growth: 33 },
                ],
                intervention: [
                    { name: 'Salazar Solares, Jose', teacher: 'Doong', grade: 3, growth: 0 },
                    { name: 'Martinez, Emiliano', teacher: 'Griffin', grade: 3, growth: -16 },
                    { name: 'Moguel Ortega, Skylar', teacher: 'Griffin', grade: 3, growth: -12 },
                    { name: 'Bolanos, Victoria', teacher: 'Griffin', grade: 3, growth: -3 },
                    { name: 'Chen, Eason', teacher: 'Griffin', grade: 3, growth: -1 },
                    { name: 'Montenegro, John Kieffer', teacher: 'Sheiring', grade: 4, growth: -19 },
                    { name: 'Racines, Kyann', teacher: 'Sheiring', grade: 4, growth: -12 },
                    { name: 'Alvarado Reyes, Alexa', teacher: 'Sheiring', grade: 4, growth: -12 },
                    { name: 'Laxa, Dominic James', teacher: 'Sheiring', grade: 4, growth: -9 },
                    { name: 'Quintero, Elijah', teacher: 'Sheiring', grade: 4, growth: -9 },
                    { name: 'Gutierrez, Victoria', teacher: 'Sheiring', grade: 4, growth: -2 },
                    { name: 'Ocampo, Jham Paola', teacher: 'Sheiring', grade: 4, growth: -2 },
                    { name: 'Pang, Zoey', teacher: 'Sutter', grade: 4, growth: -9 },
                    { name: 'Gramajo Cifuentes, Angelica Milagros', teacher: 'Sutter', grade: 4, growth: -8 },
                    { name: 'Campos Castillo, Nicole', teacher: 'Sutter', grade: 4, growth: -2 },
                    { name: 'Pascua, Tony Zachary', teacher: 'Sutter', grade: 4, growth: 0 },
                    { name: 'Perdomo Aragon, Ian Mauricio', teacher: 'Sutter', grade: 4, growth: 0 },
                    { name: 'E Sousa, Aghatta', teacher: 'Sutter', grade: 4, growth: 0 },
                    { name: 'Ferrer Castrillo, Ashlet', teacher: 'Long', grade: 5, growth: -18 },
                    { name: 'Galang, Titan Stieg', teacher: 'Long', grade: 5, growth: -11 },
                    { name: 'Stewart, Mia', teacher: 'Long', grade: 5, growth: -4 },
                    { name: 'Sitt, John', teacher: 'Long', grade: 5, growth: -3 },
                    { name: 'Barreda Reyes, Nelson', teacher: 'Long', grade: 5, growth: -2 },
                    { name: 'Soto Aguilar, Victoria', teacher: 'Long', grade: 5, growth: -1 },
                    { name: 'Wynn, Hnin Ei Ei', teacher: 'Long', grade: 5, growth: 0 },
                    { name: 'Catanyag, Anzel Jeric', teacher: 'Lopez', grade: 5, growth: -26 },
                    { name: 'Gualoto Pineda, Mathias', teacher: 'Lopez', grade: 5, growth: -21 },
                    { name: 'Guzman Gordillo, Carlos', teacher: 'Lopez', grade: 5, growth: -19 },
                    { name: 'Di Miceli Garcia, Mia', teacher: 'Lopez', grade: 5, growth: -14 },
                    { name: 'Khanouf, Giovanni', teacher: 'Lopez', grade: 5, growth: -8 },
                    { name: 'Htet, Thwin Moe', teacher: 'Lopez', grade: 5, growth: -6 },
                    { name: 'Resendiz, Andrew', teacher: 'Lopez', grade: 5, growth: -4 },
                    { name: 'Cornejo Segovia, Danya', teacher: 'Lopez', grade: 5, growth: -1 },
                    { name: 'Gonzalez Hernandez, Dominic', teacher: 'Lopez', grade: 5, growth: 0 },
                ]
            },
            recommendations: [
                { title: "Address Stagnation/Regression", text: "The 34 students identified as stagnating or regressing (25.2% of the cohort) need immediate review. This is particularly urgent in 5th grade (Ms. Lopez's class) and 4th grade (both classes), where rates were highest." },
                { title: "Leverage 3rd Grade Growth", text: "The 3rd-grade team showed the highest rate of students meeting their full annual growth target (25.0%). We should have them share successful strategies and routines with the 4th and 5th-grade teams." },
                { title: "Analyze High-Growth Students", text: "The 14 students in the 'Significant Growth (Below Level)' list are responding to instruction. Teachers should review these students to identify what strategies are working and apply them to other students." },
            ]
        };

        // --- CHART INSTANCES ---
        let charts = {};

        // --- UTILITY FUNCTIONS ---
        function clearContent() {
            const contentArea = document.getElementById('content-area');
            contentArea.innerHTML = '';
            Object.values(charts).forEach(chart => chart.destroy());
            charts = {};
        }

        function updateNav(view) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.toggle('active', item.dataset.view === view);
            });
        }
        
        function createChart(ctx, type, data, options) {
            const defaultOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        enabled: true,
                        backgroundColor: '#0f172a',
                        titleFont: { size: 14, weight: 'bold' },
                        bodyFont: { size: 12 },
                        padding: 10,
                        cornerRadius: 4,
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                let value;
                                if (context.parsed && context.parsed.y !== null && context.parsed.y !== undefined) {
                                    value = context.parsed.y;
                                } else if (context.parsed && context.parsed.x !== null && context.parsed.x !== undefined) {
                                    value = context.parsed.x;
                                } else if (context.raw) {
                                    value = context.raw;
                                } else {
                                    value = 0;
                                }
                                label += parseFloat(value).toFixed(1) + '%';
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false },
                        ticks: {
                            font: {
                                size: 12
                            },
                            maxRotation: 0,
                            autoSkip: false
                        }
                    },
                    y: {
                        grid: { color: '#e5e7eb' },
                        beginAtZero: true,
                        ticks: {
                            font: {
                                size: 12
                            },
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            };
            
            let mergedOptions = { ...defaultOptions, ...options };
            if (options.scales) {
                mergedOptions.scales = {
                    x: { ...defaultOptions.scales.x, ...options.scales.x },
                    y: { ...defaultOptions.scales.y, ...options.scales.y }
                };
            }
            if(options.plugins) {
                 mergedOptions.plugins = { ...defaultOptions.plugins, ...options.plugins };
            }

            return new Chart(ctx, { type, data, options: mergedOptions });
        }

        // --- RENDER FUNCTIONS ---
        
        function renderDashboard() {
            const data = reportData.schoolWide;
            const proficiencyGain = (data.proficiency.winter - data.proficiency.fall).toFixed(1);

            const html = `
                <h1 class="text-3xl font-bold mb-2">School-Wide Dashboard</h1>
                <p class="text-lg text-neutral-600 mb-6">This section summarizes data for all 135 students who completed both diagnostics.</p>
                
                <!-- KPI Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200">
                        <h3 class="text-sm font-medium text-neutral-500">Overall Proficiency (Winter)</h3>
                        <p class="text-4xl font-bold text-indigo-600">${data.proficiency.winter}%</p>
                        <p class="text-sm font-medium ${proficiencyGain >= 0 ? 'text-green-600' : 'text-red-600'}">
                            ${proficiencyGain >= 0 ? 'â–²' : 'â–¼'} ${proficiencyGain} p.p. from Fall
                        </p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200">
                        <h3 class="text-sm font-medium text-neutral-500">Met Full Annual Growth</h3>
                        <p class="text-4xl font-bold text-green-600">${data.growth.metAnnual}%</p>
                        <p class="text-sm text-neutral-500">22 out of 135 students</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200">
                        <h3 class="text-sm font-medium text-neutral-500">Stagnant or Regressed</h3>
                        <p class="text-4xl font-bold text-red-600">${data.growth.regressed}%</p>
                        <p class="text-sm text-neutral-500">34 out of 135 students</p>
                    </div>
                </div>

                <!-- Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200 lg:col-span-2">
                        <h3 class="text-lg font-semibold mb-4">Proficiency: Fall vs. Winter</h3>
                        <p class="text-sm text-neutral-600 mb-4">Shows the percentage of students at or above grade level ("Proficient").</p>
                        <div class="chart-container" style="height: 300px;"><canvas id="schoolProfChart"></canvas></div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200 lg:col-span-3">
                        <h3 class="text-lg font-semibold mb-4">School-Wide Domain Performance</h3>
                        <p class="text-sm text-neutral-600 mb-4">"Number and Operations" is the school's key strength, while "Geometry" is the key weakness.</p>
                        <div class="chart-container" style="height: 300px;"><canvas id="schoolDomainChart"></canvas></div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200 lg:col-span-5">
                        <h3 class="text-lg font-semibold mb-4">Student Growth Breakdown (N=135)</h3>
                        <p class="text-sm text-neutral-600 mb-4">This chart shows the distribution of student growth against their full annual target.</p>
                        <div class="chart-container" style="height: 350px; max-height: 400px;"><canvas id="schoolGrowthChart"></canvas></div>
                    </div>
                </div>
            `;
            document.getElementById('content-area').innerHTML = html;

            // Render charts
            charts.schoolProfChart = createChart(
                document.getElementById('schoolProfChart').getContext('2d'), 'bar',
                {
                    labels: ['Fall (Initial)', 'Winter (Current)'],
                    datasets: [{
                        label: '% Proficient',
                        data: [data.proficiency.fall, data.proficiency.winter],
                        backgroundColor: ['#a5b4fc', '#4f46e5'],
                        barPercentage: 0.6,
                    }]
                }, { scales: { x: { grid: { display: false } }, y: { max: 50, ticks: { callback: v => v + '%' } } }, plugins: { legend: { display: false } } }
            );

            charts.schoolGrowthChart = createChart(
                document.getElementById('schoolGrowthChart').getContext('2d'), 'doughnut',
                {
                    labels: ['Met Annual Growth', 'Stagnant or Regressed', 'Grew (Below Annual)'],
                    datasets: [{
                        data: [data.growth.metAnnual, data.growth.regressed, data.growth.other],
                        backgroundColor: ['#10b981', '#ef4444', '#f59e0b'],
                        borderColor: '#f9fafb',
                        borderWidth: 2
                    }]
                }, { plugins: { legend: { position: 'right' } } }
            );
            
            charts.schoolDomainChart = createChart(
                document.getElementById('schoolDomainChart').getContext('2d'), 'bar',
                {
                    labels: data.domains.map(d => d.name),
                    datasets: [{
                        label: '% Proficient',
                        data: data.domains.map(d => d.pct),
                        backgroundColor: '#3b82f6',
                        barPercentage: 0.6,
                    }]
                }, { indexAxis: 'y', scales: { x: { max: 50, ticks: { callback: v => v + '%' } }, y: { ticks: { autoSkip: false } } }, plugins: { legend: { display: false } } }
            );
        }

        function renderGradeDives() {
            const html = `
                <h1 class="text-3xl font-bold mb-4">Grade-Level Deep Dives</h1>
                <p class="text-lg text-neutral-600 mb-6">
                    Select a grade to see a detailed breakdown of teacher comparisons and domain performance.
                </p>
                
                <!-- Grade Tabs -->
                <div class="flex border-b border-neutral-200 mb-6 bg-white rounded-t-lg shadow-sm">
                    <button class="tab-button active" data-grade="3">Grade 3</button>
                    <button class="tab-button" data-grade="4">Grade 4</button>
                    <button class="tab-button" data-grade="5">Grade 5</button>
                </div>
                
                <div id="grade-content">
                    <!-- Grade content will be injected here -->
                </div>
            `;
            document.getElementById('content-area').innerHTML = html;

            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', () => {
                    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    renderGradeContent(button.dataset.grade);
                });
            });

            // Initial load
            renderGradeContent(3);
        }
        
        function renderGradeContent(grade) {
            const data = reportData.gradeData[grade];
            Object.values(charts).forEach(chart => chart.destroy());
            charts = {};

            let grade3ChartsHTML = `
                <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200">
                    <h3 class="text-lg font-semibold mb-4">Grade 3 Domain Performance (Overall)</h3>
                    <p class="text-sm text-neutral-600 mb-4">This chart shows the proficiency rate for all students in Grade 3.</p>
                    <div class="chart-container"><canvas id="gradeDomainChart"></canvas></div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200">
                    <h3 class="text-lg font-semibold mb-4">Grade 3 Domain Performance (Teacher)</h3>
                    <p class="text-sm text-neutral-600 mb-4">This chart directly compares domain proficiency between Mr. Doong and Mr. Griffin.</p>
                    <div class="chart-container"><canvas id="gradeDomainTeacherChart"></canvas></div>
                </div>
            `;
            
            let otherGradesChartHTML = `
                <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200">
                    <h3 class="text-lg font-semibold mb-4">Grade ${grade} Domain Performance</h3>
                    <p class="text-sm text-neutral-600 mb-4">This chart shows the proficiency rate for each math domain for all students in this grade.</p>
                    <div class="chart-container"><canvas id="gradeDomainChart"></canvas></div>
                </div>
            `;

            const html = `
                <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200 mb-6">
                    <h3 class="text-xl font-semibold mb-2">Grade ${grade} Summary</h3>
                    <p class="text-neutral-700 leading-relaxed">${data.summary}</p>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-neutral-200">
                        <h3 class="text-lg font-semibold mb-4">Teacher Comparison: Growth & Regression</h3>
                        <p class="text-sm text-neutral-600 mb-4">This chart compares the percentage of students who met their full annual growth target against those who regressed.</p>
                        <div class="chart-container"><canvas id="teacherCompareChart"></canvas></div>
                    </div>
                    
                    ${grade == 3 ? grade3ChartsHTML : otherGradesChartHTML}
                    
                </div>
            `;
            document.getElementById('grade-content').innerHTML = html;
            
            // Render charts
            charts.teacherCompareChart = createChart(
                document.getElementById('teacherCompareChart').getContext('2d'), 'bar',
                {
                    labels: data.teachers.map(t => t.name),
                    datasets: [
                        {
                            label: '% Met Full Annual Growth',
                            data: data.teachers.map(t => t.metGrowth),
                            backgroundColor: '#10b981',
                        },
                        {
                            label: '% Stagnant/Regressed',
                            data: data.teachers.map(t => t.regressed),
                            backgroundColor: '#ef4444',
                        }
                    ]
                }, { scales: { x: { grid: { display: false } }, y: { max: 50 } } }
            );

            // Conditional Chart for Domains
            if (grade == 3 && data.teacherDomains) {
                // Chart 1: Grade 3 Average
                charts.gradeDomainChart = createChart(
                    document.getElementById('gradeDomainChart').getContext('2d'), 'bar',
                    {
                        labels: data.domains.map(d => d.name),
                        datasets: [{
                            label: '% Proficient',
                            data: data.domains.map(d => d.pct),
                            backgroundColor: '#3b82f6',
                        }]
                    }, { indexAxis: 'y', scales: { x: { max: 60, ticks: { callback: v => v + '%' } }, y: { ticks: { autoSkip: false } } }, plugins: { legend: { display: false } } }
                );
                
                // Chart 2: Teacher Comparison
                charts.gradeDomainTeacherChart = createChart(
                    document.getElementById('gradeDomainTeacherChart').getContext('2d'), 'bar',
                    {
                        labels: data.teacherDomains.labels,
                        datasets: [
                            {
                                label: data.teacherDomains.doong.name,
                                data: data.teacherDomains.doong.data,
                                backgroundColor: '#a5b4fc',
                            },
                            {
                                label: data.teacherDomains.griffin.name,
                                data: data.teacherDomains.griffin.data,
                                backgroundColor: '#4f46e5',
                            }
                        ]
                    }, { scales: { x: { grid: { display: false } }, y: { max: 60 } } }
                );
            } else {
                // Use Horizontal Bar Chart for other grades
                charts.gradeDomainChart = createChart(
                    document.getElementById('gradeDomainChart').getContext('2d'), 'bar',
                    {
                        labels: data.domains.map(d => d.name),
                        datasets: [{
                            label: '% Proficient',
                            data: data.domains.map(d => d.pct),
                            backgroundColor: '#3b82f6',
                        }]
                    }, { indexAxis: 'y', scales: { x: { max: 60, ticks: { callback: v => v + '%' } }, y: { ticks: { autoSkip: false } } }, plugins: { legend: { display: false } } }
                );
            }
        }

        function renderStudentLists() {
            const html = `
                <h1 class="text-3xl font-bold mb-4">Student Action Lists</h1>
                <p class="text-lg text-neutral-600 mb-6">
                    Use the tabs and filters to create specific lists for celebration or intervention.
                </p>

                <!-- Tabs -->
                <div class="flex border-b border-neutral-200 mb-6 bg-white rounded-t-lg shadow-sm">
                    <button class="tab-button active" data-list="celebration">
                        ðŸ“ˆ Students for Celebration (${reportData.studentLists.celebration.length})
                    </button>
                    <button class="tab-button" data-list="intervention">
                        ðŸŽ¯ Students for Intervention (${reportData.studentLists.intervention.length})
                    </button>
                </div>

                <!-- Filters -->
                <div class="flex flex-wrap gap-4 mb-6 p-4 bg-white rounded-lg shadow-sm border border-neutral-200">
                    <div>
                        <label for="grade-filter" class="block text-sm font-medium text-neutral-700">Filter by Grade</label>
                        <select id="grade-filter" class="mt-1 block w-full md:w-48 rounded-md border-neutral-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                            <option value="all">All Grades</option>
                            <option value="3">Grade 3</option>
                            <option value="4">Grade 4</option>
                            <option value="5">Grade 5</option>
                        </select>
                    </div>
                    <div>
                        <label for="teacher-filter" class="block text-sm font-medium text-neutral-700">Filter by Teacher</label>
                        <select id="teacher-filter" class="mt-1 block w-full md:w-48 rounded-md border-neutral-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                            <option value="all">All Teachers</option>
                        </select>
                    </div>
                </div>

                <!-- Student Table -->
                <div class="bg-white shadow-sm border border-neutral-200 rounded-lg overflow-hidden">
                    <table class="min-w-full divide-y divide-neutral-200">
                        <thead class="bg-neutral-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Student</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Teacher</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Grade</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Actual Growth (Scale Score)</th>
                            </tr>
                        </thead>
                        <tbody id="student-table-body" class="bg-white divide-y divide-neutral-200">
                            <!-- Rows will be injected here -->
                        </tbody>
                    </table>
                </div>
            `;
            document.getElementById('content-area').innerHTML = html;

            // Add event listeners
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', () => {
                    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    populateStudentTable();
                });
            });

            document.getElementById('grade-filter').addEventListener('change', () => {
                updateTeacherFilter();
                populateStudentTable();
            });
            document.getElementById('teacher-filter').addEventListener('change', populateStudentTable);

            updateTeacherFilter();
            populateStudentTable();
        }

        function updateTeacherFilter() {
            const gradeFilter = document.getElementById('grade-filter').value;
            const teacherFilter = document.getElementById('teacher-filter');
            const currentTeacherVal = teacherFilter.value;
            
            let teachers = [];
            if (gradeFilter === 'all') {
                teachers = ['Doong', 'Griffin', 'Sheiring', 'Sutter', 'Long', 'Lopez'];
            } else {
                teachers = reportData.gradeData[gradeFilter].teachers.map(t => t.name);
            }

            teacherFilter.innerHTML = '<option value="all">All Teachers</option>';
            teachers.sort().forEach(teacher => {
                const option = document.createElement('option');
                option.value = teacher;
                option.textContent = teacher;
                teacherFilter.appendChild(option);
            });
            
            if (teachers.includes(currentTeacherVal)) {
                teacherFilter.value = currentTeacherVal;
            } else {
                teacherFilter.value = 'all';
            }
        }

        function populateStudentTable() {
            const listType = document.querySelector('.tab-button.active').dataset.list;
            const grade = document.getElementById('grade-filter').value;
            const teacher = document.getElementById('teacher-filter').value;
            const tableBody = document.getElementById('student-table-body');

            const data = reportData.studentLists[listType];
            
            const filteredData = data.filter(student => {
                const gradeMatch = (grade === 'all' || student.grade == grade);
                const teacherMatch = (teacher === 'all' || student.teacher === teacher);
                return gradeMatch && teacherMatch;
            });
            
            if (listType === 'intervention') {
                filteredData.sort((a, b) => a.growth - b.growth);
            } else {
                filteredData.sort((a, b) => b.growth - a.growth);
            }

            if (filteredData.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="4" class="px-6 py-6 text-center text-neutral-500">No students match the selected filters.</td></tr>';
                return;
            }

            tableBody.innerHTML = filteredData.map(student => `
                <tr class="hover:bg-neutral-50">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-neutral-900">${student.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-500">${student.teacher}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-500">${student.grade}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium ${student.growth <= 0 ? 'text-red-600' : 'text-green-600'}">
                        ${student.growth > 0 ? '+' : ''}${student.growth}
                    </td>
                </tr>
            `).join('');
        }

        function renderRecommendations() {
            const data = reportData.recommendations;
            const html = `
                <h1 class="text-3xl font-bold mb-6">Recommendations</h1>
                <p class.
